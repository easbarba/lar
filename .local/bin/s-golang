#!/usr/bin/env bash

# Debug Options
set -euo pipefail

DEPS=(go)
s-checkdeps "${DEPS[@]}"

s-echo "Golang Global Toolings."

export GO111MODULE=on

_packages() {
	local packages=("golang.org/x/tools/gopls@latest"
		github.com/xxxserxxx/gotop/v4/cmd/gotop@latest)

	local command="go install"
	s-dolist "$command" "${packages[@]}"
}

_tools() {
	local packages=("github.com/fatih/gomodifytags@latest"
		"github.com/cweill/gotests/..." "github.com/x-motemen/gore/cmd/gore@latest"
		"github.com/mdempsky/gocode@latest" "golang.org/x/tools/cmd/guru") # "sigs.k8s.io/kind"

	local command='go install'
	s-dolist "$command" "${packages[@]}"
}

_devel() {
	local packages=("mvdan.cc/sh/v3/cmd/shfmt@latest"
		"github.com/erning/gorun@latest")

	local command='go install'
	s-dolist "$command" "${packages[@]}"
}

# * RUN
_tools
_packages
_devel
