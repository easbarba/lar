#!/usr/bin/env bash

# Debug Options
set -euo pipefail

DEPS=(ruby gem)
s-checkdeps "${DEPS[@]}"

_base() {
    packages=(bundler rake)

    s-dolist "gem install" "${packages[@]}"
    s-dolist "gem update" "${packages[@]}"
}

_devel() {
    packages=(reek rufo rubocop solargraph)

    s-dolist "gem install" "${packages[@]}"
    s-dolist "gem update" "${packages[@]}"
}

_asdf() {
    local rb_version
    rb_version='3.1.1'

    asdf plugin add ruby https://github.com/asdf-vm/asdf-ruby.git
    asdf install ruby $rb_version
    asdf global ruby $rb_version
}

# * RUN

_base
_devel
