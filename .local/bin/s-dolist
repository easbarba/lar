#!/usr/bin/env bash

# DEBUG OPTIONS
set -euo pipefail

COMMAND="$1"
shift 1

GUARD="$1"
shift 1

ACTIONS=("$@")

# do not quote $GUARD and $COMMAND
for action in "${ACTIONS[@]}"; do
    if ! $GUARD $action; then
        $COMMAND "$action"
    fi
done
