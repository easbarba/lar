#!/usr/bin/env bash

# DEBUG SETTINGS
set -euo pipefail

DISTRO="$(awk '/^NAME=/ { split($0,a,"="); print a[2] }' /etc/os-release)"
DEPS=(sudo pak floss)

# * CHECKER
s-checkdeps "${DEPS[@]}"

# * TASKS
_distro() {
    s-echo "Upgrading $DISTRO system packages."

    pak update && pak upgrade
}

_editors() {
    s-echo "Editors and Langs packages"

    s-doom
    s-vscode
}

_foreign() {
    s-echo "System Foreign installers"

    s-flatpak
    s-ruby
    s-javascript
    s-guix
}

_user() {
    s-echo "User tasks"

    floss grab
    floss archive
}

# * RUN
_distro
_editors
_foreign
_user
