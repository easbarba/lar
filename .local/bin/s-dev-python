#!/usr/bin/env bash

# Debug Options
set -euo pipefail

DEPS=(python bash)
s-checkdeps "${DEPS[@]}"

# ===========================
# PROJECT TOOLS

packages=(black pipenv pyflakes pytest isort nose poetry python-lsp-server)

command="python3 -m pip install --user --upgrade"
s-dolist "$command" "${packages[@]}"

# ===========================
# LIBRARIES

packages=(pyperclip beautifulsoup4 interval cryptography)

command="python3 -m pip install --user --upgrade"
s-dolist "$command" "${packages[@]}"

# ===========================
# APPS

packages=(yt-dlp)

command="python3 -m pip install --user --upgrade"
s-dolist "$command" "${packages[@]}"

# ===========================
# POETRY

[[ ! -x $(command -v poetry) ]] && {
    curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python3 -

    s-echo "Poetry"
    poetry self update

    # poetry completions zsh >~/.zfunc/_poetry
}

exit
