#!/usr/bin/env bash

set -euo pipefail

e_echo "Doom Emacs"

EMACS_HOME="$HOME/.config/emacs"

wipe() { rm -rf ~/.emacs.d; }

grab() {
    [[ -x "$EMACS_HOME"/bin/doom ]] && return

    rm -rf "$EMACS_HOME"
    git clone --depth 1 https://github.com/hlissner/doom-emacs "$EMACS_HOME"
}

install() { "$EMACS_HOME"/bin/doom install; }

upgrade() { doom upgrade; }

# * RUN
wipe
grab
# install
upgrade
