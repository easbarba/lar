#!/usr/bin/env bash

set -euo pipefail

DEPS=(emacs)
MX_HOME="$HOME/.config/emacs"

e_checkdeps "${DEPS[@]}"

e_echo "Doom Emacs - Install/Upgrade."

wipe() { rm -rf ~/.emacs.d; }
grab() { git clone --depth 1 https://github.com/hlissner/doom-emacs "$MX_HOME"; }
install() { "$MX_HOME"/bin/doom install; }
sync() { doom sync; }
upgrade() { doom upgrade; }

# * RUN
wipe
[[ ! -x "$MX_HOME"/bin/doom ]] && grab && install
upgrade
