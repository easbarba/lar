#!/usr/bin/env bash

# DEBUG SETTINGS
set -euo pipefail

DISTRO="$(awk '/^NAME=/ { split($0,a,"="); print a[2] }' /etc/os-release)"
DEPS=(sudo zae qas)

# * CHECKER
s-checkdeps "${DEPS[@]}"

# ==========================================
s-echo "Upgrading $DISTRO system packages."

[[ -x $(command -v zae) ]] && zae update && zae upgrade

# ==========================================
s-echo "Foreign installers"

s-distro-guix
s-distro-flatpak

# ==========================================
s-echo "Editors and Langs packages"

s-dev-doom

# ==========================================
s-echo "Languages package installers"

s-dev-ruby
s-dev-golang
s-dev-javascript

# ==========================================
s-echo "User tasks"

qas --grab
qas --archive lar,annotations,mx,rake # TODO: save to usb-stick
