#+TITLE: Ansible

* TOC
  :PROPERTIES:
  :TOC:      :include all :depth 2 :ignore this
  :END:
  :CONTENTS:
  - [[#fortschritt][Fortschritt]]
    - [[#buch][Buch]]
  - [[#infra-provisioning][Infra Provisioning]]
    - [[#cloudformation][CloudFormation]]
    - [[#pulumi][Pulumi]]
    - [[#terraform][Terraform]]
  - [[#configuration-management][Configuration Management]]
    - [[#terms][terms]]
    - [[#alternatives][alternatives]]
  - [[#containers][Containers]]
    - [[#images][Images]]
  - [[#orchestration][Orchestration]]
    - [[#kubernetes-k8s][Kubernetes (k8s)]]
  - [[#cloud-providers][Cloud Providers]]
    - [[#heroku][Heroku]]
    - [[#azure][Azure]]
    - [[#aws][AWS]]
  - [[#linux][Linux]]
    - [[#progresso][Progresso]]
    - [[#text-manipulation][Text Manipulation]]
    - [[#process-monitoring][Process Monitoring]]
    - [[#df][Df]]
    - [[#strace][strace]]
    - [[#dstrace][dstrace]]
    - [[#multiplexers][Multiplexers]]
    - [[#firewall][Firewall]]
    - [[#lvm][LVM]]
    - [[#swap][Swap]]
    - [[#systemd][SystemD]]
    - [[#disk-space-and-partition][Disk Space and Partition]]
    - [[#sync][Sync]]
    - [[#laptop][Laptop]]
    - [[#steam][Steam]]
    - [[#boot][Boot]]
    - [[#xorg][X.org]]
    - [[#network][Network]]
    - [[#containers-virtualization][Containers, Virtualization]]
    - [[#terminal][Terminal]]
    - [[#home][$HOME]]
    - [[#commands][Commands]]
    - [[#packages][Packages]]
    - [[#udev-rules-udevrulesd][Udev rules (udev/rules.d)]]
  - [[#cicd][CI/CD]]
    - [[#gitlab][Gitlab]]
    - [[#github-actions][Github Actions]]
    - [[#circle-ci][Circle CI]]
    - [[#jenkins][Jenkins]]
  - [[#virtual-machine][Virtual Machine]]
  - [[#web-server][Web Server]]
    - [[#apache][Apache]]
    - [[#nginx][Nginx]]
  - [[#toolings][Toolings]]
    - [[#hcl][Hcl]]
  - [[#version-control][Version Control]]
    - [[#git][Git]]
  - [[#shell][Shell]]
    - [[#gnu-bash][GNU Bash]]
    - [[#bash-resources][Bash resources]]
    - [[#fish][Fish]]
    - [[#zsh][Zsh]]
    - [[#tcsh][TCSH]]
    - [[#posix][Posix]]
  - [[#compilers][Compilers]]
    - [[#gnu-gcc][GNU GCC]]
    - [[#clang][Clang]]
  - [[#editors][Editors]]
    - [[#nano][Nano]]
    - [[#vimneovim][Vim/NeoVim]]
    - [[#emacs][Emacs]]
  - [[#network][Network]]
    - [[#protocols][Protocols]]
    - [[#terms][Terms]]
  - [[#concepts][Concepts]]
  - [[#skills][Skills]]
  - [[#concepts][Concepts]]
  - [[#sites][Sites]]
  - [[#distros][Distros]]
    - [[#apt][APT]]
    - [[#rpm][RPM]]
    - [[#gentoo][Gentoo]]
    - [[#functional][Functional]]
  - [[#yet-to-learn][Yet to learn]]
  - [[#software][Software]]
    - [[#onlines][Onlines]]
    - [[#media][Media]]
    - [[#browser][Browser]]
  :END:
* Progress
** Livros
| Livros             | Capitulo                             | em                                                  |
|--------------------+--------------------------------------+-----------------------------------------------------|
| Ansible for DevOps | 2 - Local Infrastructure Development | Prototyping and testing with local virtual machines |
|                    |                                      |                                                     |

* Defition
Tool to automate IT tasks
* Traits
- requires python
- agentless
- support os, cloud
- reusable file configuration for different env
- yaml
- configuration
- mainly configuration
- deployment
- install/update software
- better in configuring
- procedural
* cli
|                           |                           |
|---------------------------+---------------------------|
| -m <MODULE> -a <OPT_ARGS> | use module with arguments |
| --ask-become-pass         | run command as sudo       |
| --ask-pass                | still require pass        |
| -a                        | module arguments          |
| -k                        | ask pass                  |
* ansible-playboy
|                      |   |
|----------------------+---|
| --connection=<LOCAL> |   |
| --inventory <IP>     |   |
| --limit <IP>         |   |

** run local
#+begin_src shell
ansible-playbook \
    --connection=local \
    --inventory 127.0.0.1, \
    --limit 127.0.0.1 ~/Documents/Ansible/local_playbook.yml
#+end_src

* Invetory
- list of the hosts that you wish to run the automation commands against
- Ip addres or hostname
- webservers: groups multiple ip addresses or hosts names
- databases
- can dynamic inventories
- invetory location: /etc/ansible/hosts

** inventory example
#+begin_src conf
[example]
ubuntu ansible_host=18.1 ansible_connection=ssh ansible_user=ubuntu ansible_ssh_private_key_file=/home/meh/Documents/meh.pem
#+end_src

* Tower
- ui dashboard from redhat
- centrally automate tools
- across teams
- configure permissions
- manage inventory
* Playbooks
** usage
      - docker container
      - vagrant container
      - cloud instance
      - bare metal
** tips
*** running ansible command locally
       ansible-playbook --connection=local --inventory 127.0.0.1, playbook.yml
** good practices
      - naming plays
** traits
      - hosts: execute tasks
      - execute multiple modules in sequence
      - organized in tasks
      - arguments
      - modules name

* Vars
** ansible_env.HOME
      get remote home

* Modules
** Trais
      - lots of modules avaiable: https://docs.ansible.com/ansible/2.8/modules/modules_by_category.html
      - grouped together
      - one action may require multiple module
      - applied in sequences
** packages
      https://docs.ansible.com/ansible/latest/collections/ansible/builtin/package_module.html
** Small specific taks
      - create file
      - install nginx
      - start docker container
      - create cloud instance
** Perform one action
      -
