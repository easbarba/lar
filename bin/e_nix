#!/usr/bin/env bash

set -euo pipefail

# Info: boostrap Nix
# Dependencies: sudo, curl, bash

install()
{
    [[ -x $(command -v nix-env) ]] && return

    curl -L https://nixos.org/nix/install | sh
}

packages()
{
    local packs=(direnv cpufetch solargraph mcfly)
    e_dolist 'nix-env -i' "${packs[@]}"

    local packs2=(nixpkgs.ruby_2_7 nixpkgs.nodejs nixpkgs.nodePackages.npm)
    e_dolist 'nix-env -iA' "${packs2[@]}"
}

install
packages
