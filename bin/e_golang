#!/usr/bin/env bash

# Information
# Repo: https://github.com/kennyp/asdf_golang

# Debug Options
set -euo pipefail

# Sourcing
source "$HOME/.asdf/completions/asdf.bash"
source "$HOME/.asdf/asdf.sh"

export GO111MODULE=on

add()
{
    echo 'Installing golang binaries'

    asdf plugin-add golang https://github.com/kennyp/asdf-golang.git
}

install()
{
    asdf install golang latest
    asdf global golang "$(asdf latest golang)"
}

packages()
{
    echo 'Installing golang packages'

    local command='go install'
    local packages=("golang.org/x/tools/cmd/goimports@latest"
		    "golang.org/x/lint/golint@latest"
		    "golang.org/x/tools/gopls@latest"
		    "github.com/golangci/golangci-lint/cmd/golangci-lint@v1.39.0"
		    "sigs.k8s.io/kind")

    e_dolist $command ${packages[@]}
}

# * RUN

echo 'Golang - ASDF'

add
install
packages
