#!/usr/bin/env bash

# Repository: https://github.com/asdf-vm/asdf-ruby.git

# Debug Options
set -euo pipefail

# * Sourcing
source "$HOME/.asdf/completions/asdf.bash"
source "$HOME/.asdf/asdf.sh"

add()
{
    [[ -f "$HOME/.asdf/shims/ruby" ]] && return

    asdf plugin-add ruby https://github.com/asdf-vm/asdf-ruby.git
}

install()
{
    local default=2.7.2
    asdf install ruby $default

    asdf global ruby $default
}

packages()
{
    local packages=(bundler rake) # asciidoctor rouge gem-man ronn)

    e_dolist "gem install" "${packages[@]}" # --user-install
    e_dolist "gem update" "${packages[@]}"
}

# * RUN

echo 'Ruby - ASDF'

add
install
packages
