#!/usr/bin/env bash

# Description: auto-start list of software toolings

LOCAL_BIN="$HOME/.local/bin"

# * Guards
[ "$DESKTOP_SESSION" == "plasma" ] && exit
[ "$DESKTOP_SESSION" == "gnome" ] && exit

# * APPS LIST

tools=(udiskie mpd)
apps=("$LOCAL_BIN/s-mx" gnome-terminal evince firefox nm-applet picom "$LOCAL_BIN/s-wall")

# * Helpers

not_found() { [[ ! -x $(command -v "$1") ]]; }

is_running() { [[ $(pgrep -f "$1") ]]; }

run() {
  "$1" &
}

autostart() {
  local apps=("$@")

  for app in "${apps[@]}"; do
    not_found "$app" && continue
    is_running "$app" && continue
    run "$app"
  done
}

# * Run

autostart "${tools[@]}"
autostart "${apps[@]}"
