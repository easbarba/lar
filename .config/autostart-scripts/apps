#!/usr/bin/env bash

# Description: auto-start list of software toolings
DEPS=(pgrep bash feh)
e_checkdeps ${DEPS[@]}

LOCAL_BIN="$HOME/.local/bin"

# * Guards

[ "$DESKTOP_SESSION" == "plasma" ] && exit
[ "$DESKTOP_SESSION" == "gnome" ] && exit

# * APPS LIST

tools=(udiskie mpd)

apps=(st zathura "$LOCAL_BIN/e_mx" "$LOCAL_BIN/e_wall")

# * Helpers

not_found() {
  [[ ! -x $(command -v "$1") ]]
}

is_running() {
  [[ $(pgrep -f "$1") ]]
}

run() {
  "$1" &
}

autostart() {
  local apps=("$@")

  for app in "${apps[@]}"; do
    not_found "$app" && continue
    is_running "$app" && continue
    run "$app"
  done
}

# * Run

autostart "${tools[@]}"
autostart "${apps[@]}"
