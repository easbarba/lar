[Unit]

Description=Wayland ssh key agent

[Service]
Type=simple
Environment=SSH_AUTH_SOCK=%t/ssh-agent.socket
Environment=DISPLAY=:0
ExecStartPre=/bin/bash -c "if [ -e ${SSH_AUTH_SOCK} ]; then echo \"Removing staled ${SSH_AUTH_SOCK}\" && rm ${SSH_AUTH_SOCK}; fi"
ExecStart=/usr/bin/ssh-agent -D -a ${SSH_AUTH_SOCK}
Restart=on-failure
RestartSec=1
TimeoutStopSec=10

[Install]
WantedBy=default.target
